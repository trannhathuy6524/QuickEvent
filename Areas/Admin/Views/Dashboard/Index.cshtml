@model QuickEvent.Areas.Admin.Models.StatisticsViewModel
@{
    ViewData["Title"] = "Quản trị hệ thống";
}

<style>
    .dashboard-container {
        background-color: #F7F7F7;
        padding: 24px;
        border-radius: 16px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        font-family: Arial, sans-serif;
        margin: 24px auto;
    }

    h1, h5 {
        color: #FF385C;
        font-weight: 600;
        font-family: Arial, sans-serif;
    }

    h1 {
        font-size: 32px;
        margin-bottom: 8px;
    }

    h5 {
        font-size: 20px;
        margin-bottom: 16px;
    }

    .text-muted {
        color: #666 !important;
        font-size: 16px;
        font-family: Arial, sans-serif;
    }

    .card {
        background-color: #FFFFFF;
        border: none;
        border-radius: 12px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
    }

    .card-body {
        padding: 16px;
    }

    .card-footer {
        border-top: none;
        background-color: transparent;
        padding: 8px 16px;
    }

    .card-subtitle {
        color: #666;
        font-size: 14px;
        font-family: Arial, sans-serif;
    }

    .card-title {
        color: #222222;
        font-size: 28px;
        font-weight: 600;
        font-family: Arial, sans-serif;
    }

    .btn-outline-primary, .btn-outline-success, .btn-outline-info, .btn-outline-warning {
        border: 1px solid #222222;
        background-color: transparent;
        color: #222222;
        padding: 8px 16px;
        border-radius: 8px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        position: relative;
        font-size: 14px;
        transition: border-color 0.3s, color 0.3s;
        transform: scale(1.1);
        font-family: Arial, sans-serif;
        text-decoration: none;
    }

        .btn-outline-primary i, .btn-outline-success i, .btn-outline-info i, .btn-outline-warning i {
            color: #222222;
            font-size: 16px;
            margin-right: 4px;
        }

        .btn-outline-primary:hover, .btn-outline-success:hover, .btn-outline-info:hover, .btn-outline-warning:hover {
            border-color: #FF385C;
            color: #FF385C;
            background-color: transparent !important;
        }

            .btn-outline-primary:hover i, .btn-outline-success:hover i, .btn-outline-info:hover i, .btn-outline-warning:hover i {
                color: #FF385C;
            }

        .btn-outline-primary .tooltip-text, .btn-outline-success .tooltip-text, .btn-outline-info .tooltip-text, .btn-outline-warning .tooltip-text {
            visibility: hidden;
            background-color: #222222;
            color: #FFFFFF;
            text-align: center;
            border-radius: 6px;
            padding: 8px 12px;
            position: absolute;
            z-index: 1;
            bottom: -40px;
            font-size: 12px;
            white-space: nowrap;
        }

        .btn-outline-primary:hover .tooltip-text, .btn-outline-success:hover .tooltip-text, .btn-outline-info:hover .tooltip-text, .btn-outline-warning:hover .tooltip-text {
            visibility: visible;
        }

    a.text-primary, a.text-success, a.text-info, a.text-warning {
        color: #222222 !important;
        position: relative;
        display: inline-flex;
        align-items: center;
        text-decoration: none;
    }

        a.text-primary i, a.text-success i, a.text-info i, a.text-warning i {
            color: #222222;
            font-size: 16px;
            margin-left: 4px;
        }

        a.text-primary:hover, a.text-success:hover, a.text-info:hover, a.text-warning:hover {
            color: #FF385C !important;
        }

            a.text-primary:hover i, a.text-success:hover i, a.text-info:hover i, a.text-warning:hover i {
                color: #FF385C;
            }

        a.text-primary .tooltip-text, a.text-success .tooltip-text, a.text-info .tooltip-text, a.text-warning .tooltip-text {
            visibility: hidden;
            background-color: #222222;
            color: #FFFFFF;
            text-align: center;
            border-radius: 6px;
            padding: 8px 12px;
            position: absolute;
            z-index: 1;
            bottom: -40px;
            font-size: 12px;
            white-space: nowrap;
        }

        a.text-primary:hover .tooltip-text, a.text-success:hover .tooltip-text, a.text-info:hover .tooltip-text, a.text-warning:hover .tooltip-text {
            visibility: visible;
        }

    .badge {
        background-color: #FF385C;
        color: #FFFFFF;
        font-family: Arial, sans-serif;
        font-size: 12px;
        padding: 6px 10px;
    }

    .list-group-item {
        background-color: transparent;
        border: none;
        color: #222222;
        font-size: 16px;
        font-family: Arial, sans-serif;
        padding: 8px 0;
    }

    .bg-primary.bg-opacity-10, .bg-success.bg-opacity-10, .bg-info.bg-opacity-10, .bg-warning.bg-opacity-10 {
        background-color: #F7F7F7 !important;
    }

    .text-primary, .text-success, .text-info, .text-warning {
        color: #222222 !important;
    }

    .card-spacing {
        width: 296px;
        margin-right: 20px;
        margin-bottom: 20px;
    }

        .card-spacing:last-child {
            margin-right: 0;
        }
</style>

<div class="container py-4">
    <div class="row mb-4">
        <div class="col">
            <h1 class="display-6 fw-bold">Bảng điều khiển quản trị</h1>
            <p class="text-muted">Tổng quan về hệ thống và các hoạt động sự kiện</p>
        </div>
    </div>

    <!-- Thẻ tổng quan -->
    <div class="row mb-4">
        <div class="col-md-3 mb-3">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="card-subtitle mb-2 text-muted">Tổng số sự kiện</h6>
                            <h2 class="card-title mb-0">@Model.TotalEvents</h2>
                        </div>
                        <div class="p-3 rounded">
                            <i class="bi bi-calendar-event fs-2 text-primary"></i>
                        </div>
                    </div>
                    <div class="mt-3">
                        @if (Model.PendingEvents > 0)
                        {
                            <a asp-area="Admin" asp-controller="Event" asp-action="Index" class="badge text-decoration-none">
                                @Model.PendingEvents sự kiện chờ duyệt
                            </a>
                        }
                    </div>
                </div>
                <div class="card-footer bg-transparent">
                    <a asp-area="Admin" asp-controller="Event" asp-action="Index" class="text-primary">
                        Xem chi tiết <i class="bi bi-arrow-right"></i><span class="tooltip-text">Xem sự kiện</span>
                    </a>
                </div>
            </div>
        </div>

        <div class="col-md-3 mb-3">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="card-subtitle mb-2 text-muted">Tổng số đăng ký</h6>
                            <h2 class="card-title mb-0">@Model.TotalRegistrations</h2>
                        </div>
                        <div class="p-3 rounded">
                            <i class="bi bi-ticket-perforated fs-2 text-success"></i>
                        </div>
                    </div>
                    <div class="mt-3">
                        @if (Model.NewRegistrationsLast24Hours > 0)
                        {
                            <a asp-area="Admin" asp-controller="Dashboard" asp-action="TotalRegistrations" class="badge text-decoration-none">
                                @Model.NewRegistrationsLast24Hours đăng ký mới (24h)
                            </a>
                        }
                    </div>
                </div>
                <div class="card-footer bg-transparent">
                    <a asp-area="Admin" asp-controller="Dashboard" asp-action="TotalRegistrations" class="text-success">
                        Xem chi tiết <i class="bi bi-arrow-right"></i><span class="tooltip-text">Xem tổng số đăng ký</span>
                    </a>
                </div>
            </div>
        </div>

        <div class="col-md-3 mb-3">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="card-subtitle mb-2 text-muted">Người dùng hoạt động</h6>
                            <h2 class="card-title mb-0">@Model.ActiveUsers</h2>
                        </div>
                        <div class="p-3 rounded">
                            <i class="bi bi-people-fill fs-2 text-info"></i>
                        </div>
                    </div>
                </div>
                <div class="card-footer bg-transparent">
                    <a asp-area="Admin" asp-controller="UserManagement" asp-action="Index" class="text-info">
                        Xem chi tiết <i class="bi bi-arrow-right"></i><span class="tooltip-text">Xem người dùng</span>
                    </a>
                </div>
            </div>
        </div>

        <div class="col-md-3 mb-3">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="card-subtitle mb-2 text-muted">Yêu cầu Organizer</h6>
                            <h2 class="card-title mb-0">@Model.PendingOrganizerRequests</h2>
                        </div>
                        <div class="p-3 rounded">
                            <i class="bi bi-person-plus fs-2 text-warning"></i>
                        </div>
                    </div>
                </div>
                <div class="card-footer bg-transparent">
                    <a asp-area="Admin" asp-controller="OrganizerRequest" asp-action="Index" class="text-warning">
                        Xem chi tiết <i class="bi bi-arrow-right"></i><span class="tooltip-text">Xem yêu cầu</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Các thẻ quản lý nhanh -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-header bg-light py-3">
                    <h5 class="mb-0">Quản lý nhanh</h5>
                </div>
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-2 card-spacing">
                            <a asp-area="Admin" asp-controller="UserManagement" asp-action="Index" class="btn btn-outline-primary w-100 py-3">
                                <i class="bi bi-people fs-4 d-block mb-2"></i> Quản lý người dùng
                                <span class="tooltip-text">Quản lý người dùng</span>
                            </a>
                        </div>
                        <div class="col-md-2 card-spacing">
                            <a asp-area="Admin" asp-controller="Event" asp-action="Index" class="btn btn-outline-success w-100 py-3">
                                <i class="bi bi-calendar-event fs-4 d-block mb-2"></i> Quản lý sự kiện
                                <span class="tooltip-text">Quản lý sự kiện</span>
                            </a>
                        </div>
                        <div class="col-md-2 card-spacing">
                            <a asp-area="Admin" asp-controller="Dashboard" asp-action="TotalRegistrations" class="btn btn-outline-info w-100 py-3">
                                <i class="bi bi-ticket-perforated fs-4 d-block mb-2"></i> Quản lý đăng ký
                                <span class="tooltip-text">Xem tổng số đăng ký</span>
                            </a>
                        </div>
                        <div class="col-md-2 card-spacing">
                            <a asp-area="Admin" asp-controller="OrganizerRequest" asp-action="Index" class="btn btn-outline-warning w-100 py-3">
                                <i class="bi bi-person-plus fs-4 d-block mb-2"></i> Yêu cầu Organizer
                                <span class="tooltip-text">Yêu cầu Organizer</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Thống kê nhanh -->
    <div class="row">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-header bg-light py-3">
                    <h5 class="mb-0">Thống kê nhanh</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="list-group list-group-flush">
                                <div class="list-group-item d-flex justify-content-between align-items-center">
                                    <span>Sự kiện sắp diễn ra</span>
                                    <span class="badge rounded-pill">@Model.UpcomingEvents</span>
                                </div>
                                <div class="list-group-item d-flex justify-content-between align-items-center">
                                    <span>Sự kiện đang diễn ra</span>
                                    <span class="badge rounded-pill">@Model.OngoingEvents</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="list-group list-group-flush">
                                <div class="list-group-item d-flex justify-content-between align-items-center">
                                    <span>Người dùng mới (7 ngày)</span>
                                    <span class="badge rounded-pill">@Model.NewUsersLast7Days</span>
                                </div>
                                <div class="list-group-item d-flex justify-content-between align-items-center">
                                    <span>Đăng ký mới (24h)</span>
                                    <span class="badge rounded-pill">@Model.NewRegistrationsLast24Hours</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <script>
        document.querySelectorAll('.btn').forEach(btn => {
            btn.addEventListener('click', () => {
                btn.classList.add('animate__animated', 'animate__pulse');
                setTimeout(() => btn.classList.remove('animate__animated', 'animate__pulse'), 500);
            });
        });
    </script>
}